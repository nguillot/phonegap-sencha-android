{"name":"Phonegap-sencha-android","body":"# Création des projets\r\n\r\nCréer un répertoire nommé \"phonegap-sencha\" à l'endroit où vous voulez stocker vos projets.\r\n\r\n\r\n## Création du projet Android\r\n\r\n### Prérequis\r\n * Avoir l'environnement Android installé et à jour\r\n * Avoir la dernière version d'intellJ Idea\r\n * Avoir télécharger phonegap\r\n\r\n### étapes\r\n\r\n * Créer un projet Android comme suit:\r\n\r\n![Alt création d'un projet android avec IntellJ - 1](https://raw.github.com/nguillot/phonegap-sencha-android/master/images/android-project-creation1.png)\r\n\r\n![Alt création d'un projet android avec IntellJ - 2](https://raw.github.com/nguillot/phonegap-sencha-android/master/images/android-project-creation2.png)\r\n\r\n![Alt création d'un projet android avec IntellJ - 3](https://raw.github.com/nguillot/phonegap-sencha-android/master/images/android-project-creation3.png)\r\n\r\n![Alt création d'un projet android avec IntellJ - 4](https://raw.github.com/nguillot/phonegap-sencha-android/master/images/android-project-creation4.png)\r\n\r\n * s'ils n'existent pas créer les répertoires\r\n    * /libs\r\n    * /assets/www\r\n\r\n * copier le fichier cordova-2.1.0.js dans le répertoire /assets/www/\r\n * copier le fichier cordova-2.1.0.jar dans le répertoire /libs\r\n * créer le fichier /assets/www/main.js\r\n\r\n```\r\nvar isReady = function() {\r\n    document.getElementById(\"isReady\").innerHTML = \"is ready\";\r\n    document.getElementById(\"platform\").innerHTML = device.platform;\r\n    document.getElementById(\"version\").innerHTML = device.version;\r\n    document.getElementById(\"name\").innerHTML = device.name;\r\n    document.getElementById(\"width\").innerHTML = screen.width;\r\n    document.getElementById(\"height\").innerHTML = screen.height;\r\n};\r\n\r\nvar getLocation = function() {\r\n    var suc = function(p) {\r\n        alert(p.coords.latitude + \" \" + p.coords.longitude);\r\n    };\r\n    var locFail = function() {\r\n    };\r\n    navigator.geolocation.getCurrentPosition(suc, locFail);\r\n};\r\n\r\nfunction check_network() {\r\n    var networkState = navigator.network.connection.type;\r\n\r\n    var states = {};\r\n    states[Connection.UNKNOWN]  = 'Unknown connection';\r\n    states[Connection.ETHERNET] = 'Ethernet connection';\r\n    states[Connection.WIFI]     = 'WiFi connection';\r\n    states[Connection.CELL_2G]  = 'Cell 2G connection';\r\n    states[Connection.CELL_3G]  = 'Cell 3G connection';\r\n    states[Connection.CELL_4G]  = 'Cell 4G connection';\r\n    states[Connection.NONE]     = 'No network connection';\r\n\r\n    confirm('Connection type:\\n ' + states[networkState]);\r\n}\r\n\r\nfunction init() {\r\n    // the next line makes it impossible to see Contacts on the HTC Evo since it\r\n    // doesn't have a scroll button\r\n    // document.addEventListener(\"touchmove\", preventBehavior, false);\r\n    document.addEventListener(\"deviceready\", isReady, true);\r\n}\r\n```\r\n\r\n * créer le fichier /assets/www/index.html:\r\n```\r\n<html>\r\n  <head>\r\n    <meta name=\"viewport\" content=\"width=320; user-scalable=no\" />\r\n    <meta http-equiv=\"Content-type\" content=\"text/html; charset=utf-8\">\r\n    <title>PhoneGap</title>\r\n      <link rel=\"stylesheet\" href=\"master.css\" type=\"text/css\" media=\"screen\" title=\"no title\">\r\n      <script type=\"text/javascript\" charset=\"utf-8\" src=\"cordova-2.1.0.js\"></script>\r\n      <script type=\"text/javascript\" charset=\"utf-8\" src=\"main.js\"></script>\r\n\r\n  </head>\r\n  <body onload=\"init();\" id=\"stage\" class=\"theme\">\r\n    <h1>Welcome to Cordova!</h1>\r\n    <h2>this file is located at assets/www/index.html</h2>\r\n    <div id=\"info\">\r\n        <h4>Plateform is ready: <span id=\"isReady\"> &nbsp;</span></h4>\r\n        <h4>Platform: <span id=\"platform\"> &nbsp;</span>,   Version: <span id=\"version\">&nbsp;</span></h4>\r\n        <h4>Name: <span id=\"name\">&nbsp;</span></h4>\r\n        <h4>Width: <span id=\"width\"> &nbsp;</span>,   Height: <span id=\"height\">&nbsp;</span></h4>\r\n     </div>\r\n    <a href=\"#\" class=\"btn large\" onclick=\"getLocation();\">Get Location</a>\r\n    <a href=\"#\" class=\"btn large\" onclick=\"check_network();return false;\">Check Network</a>\r\n  </body>\r\n</html>\r\n```\r\n\r\n * créer le fichier res/xml/config.xml:\r\n\r\n```\r\n<cordova>\r\n    <access origin=\"http://127.0.0.1*\"/> <!-- allow local pages -->\r\n    <log level=\"DEBUG\"/>\r\n    <preference name=\"useBrowserHistory\" value=\"false\" />\r\n<plugins>\r\n    <plugin name=\"App\" value=\"org.apache.cordova.App\"/>\r\n    <plugin name=\"Geolocation\" value=\"org.apache.cordova.GeoBroker\"/>\r\n    <plugin name=\"Device\" value=\"org.apache.cordova.Device\"/>\r\n    <plugin name=\"File\" value=\"org.apache.cordova.FileUtils\"/>\r\n    <plugin name=\"NetworkStatus\" value=\"org.apache.cordova.NetworkManager\"/>\r\n    <plugin name=\"Notification\" value=\"org.apache.cordova.Notification\"/>\r\n    <plugin name=\"Storage\" value=\"org.apache.cordova.Storage\"/>\r\n    <plugin name=\"Temperature\" value=\"org.apache.cordova.TempListener\"/>\r\n    <plugin name=\"FileTransfer\" value=\"org.apache.cordova.FileTransfer\"/>\r\n    <plugin name=\"Battery\" value=\"org.apache.cordova.BatteryListener\"/>\r\n    <plugin name=\"SplashScreen\" value=\"org.apache.cordova.SplashScreen\"/>\r\n</plugins>\r\n</cordova>\r\n```\r\n\r\n Il permet de définir les plugins utilisés par phonegap. Si on a besoin de plus de plugins, il faut les ajouter.\r\n\r\n * ajouter ce jar dans le classpath du projet:\r\n\r\n![Alt création d'un projet android avec IntellJ - 5](https://raw.github.com/nguillot/phonegap-sencha-android/master/images/android-project-creation5.png)\r\n\r\n![Alt création d'un projet android avec IntellJ - 6](https://raw.github.com/nguillot/phonegap-sencha-android/master/images/android-project-creation6.png)\r\n\r\n![Alt création d'un projet android avec IntellJ - 7](https://raw.github.com/nguillot/phonegap-sencha-android/master/images/android-project-creation7.png)\r\n\r\n![Alt création d'un projet android avec IntellJ - 8](https://raw.github.com/nguillot/phonegap-sencha-android/master/images/android-project-creation8.png)\r\n\r\n * modifier l'activité de façon à avoir:\r\n\r\n```\r\npackage fr.ippon.phonegapsencha;\r\n\r\nimport android.os.Bundle;\r\nimport org.apache.cordova.DroidGap;\r\n\r\npublic class PhonegapSencha extends DroidGap\r\n{\r\n    /** Called when the activity is first created. */\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState)\r\n    {\r\n        super.onCreate(savedInstanceState);\r\n        super.loadUrl(\"file:///android_asset/www/index.html\");\r\n    }\r\n}\r\n```\r\n\r\n * modifier le fichier AndroidManifest.xml de façon à avoir\r\n\r\n```\r\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n          package=\"fr.ippon.phonegapsencha\"\r\n          android:versionCode=\"1\"\r\n          android:versionName=\"1.0\">\r\n    <uses-sdk android:minSdkVersion=\"8\"/>\r\n    <supports-screens\r\n            android:largeScreens=\"true\"\r\n            android:normalScreens=\"true\"\r\n            android:smallScreens=\"true\"\r\n            android:resizeable=\"true\"\r\n            android:anyDensity=\"true\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_LOCATION_EXTRA_COMMANDS\" />\r\n    <uses-permission android:name=\"android.permission.READ_PHONE_STATE\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" />\r\n    <uses-permission android:name=\"android.permission.BROADCAST_STICKY\" />\r\n\r\n    <application android:label=\"@string/app_name\">\r\n        <activity android:name=\"PhonegapSencha\"\r\n                  android:label=\"@string/app_name\"\r\n                  android:configChanges=\"orientation|keyboardHidden|keyboard|locale\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\"/>\r\n                <category android:name=\"android.intent.category.LAUNCHER\"/>\r\n            </intent-filter>\r\n        </activity>\r\n    </application>\r\n</manifest>\r\n```\r\n * créé\r\n * lancer le simulateur, vous devriez obtenir ceci:\r\n\r\n![Alt création d'un projet android avec IntellJ - 9](https://raw.github.com/nguillot/phonegap-sencha-android/master/images/android-project-creation9.png)\r\n\r\n### Source\r\n[Phonegap: Getting Started with Android] (http://docs.phonegap.com/en/2.1.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)\r\n\r\n\r\n## Partage sous github\r\n\r\n * créer le fichier .gitignore à la racine avec le contenu suivant:\r\n<pre><code>\r\n*.iml\r\n*.ipr\r\n*.iws\r\n.idea/\r\nlocal.properties\r\nbin/\r\ntarget\r\ngen/\r\n.DS_Store\r\n</code></pre>\r\n\r\n * ajouter le projet à github:\r\n![Alt partage github avec IntellJ - 1](https://raw.github.com/nguillot/phonegap-sencha-android/master/images/partage-git-1.png)\r\n\r\n![Alt partage github avec IntellJ - 2](https://raw.github.com/nguillot/phonegap-sencha-android/master/images/partage-git-2.png)\r\n\r\n * le projet est créé sous giithub mais aucun fichier n'est commité, nous allons arranger ça: dans un terminal lancer la commande à la racine du projet:\r\n''' git add . '''\r\n\r\n * remarque ensuite que seul les fichiers n'étant pas dans le gitignore sont ajouté, c'est bien ce que nous voulons:\r\n\r\n![Alt partage github avec IntellJ - 3](https://raw.github.com/nguillot/phonegap-sencha-android/master/images/partage-git-3.png)\r\n\r\n\r\n * nous allons maintenant commiter ces fichiers dans le repository local:\r\n\r\n![Alt partage github avec IntellJ - 4](https://raw.github.com/nguillot/phonegap-sencha-android/master/images/partage-git-4.png)\r\n\r\n![Alt partage github avec IntellJ - 5](https://raw.github.com/nguillot/phonegap-sencha-android/master/images/partage-git-5.png)\r\n\r\n * il nous reste à pousser ces modifications dans notre github\r\n\r\n![Alt partage github avec IntellJ - 6](https://raw.github.com/nguillot/phonegap-sencha-android/master/images/partage-git-6.png)\r\n\r\n![Alt partage github avec IntellJ - 7](https://raw.github.com/nguillot/phonegap-sencha-android/master/images/partage-git-7.png)\r\n\r\nLe dernier écran liste les commit local, on remarque que j'en ai fait un de plus que vous!","google":"","note":"Don't delete this file! It's used internally to help with page regeneration.","tagline":"Projet de démo phonegap sencha"}